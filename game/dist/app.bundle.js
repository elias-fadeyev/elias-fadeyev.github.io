!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class n{constructor(t,e,i,n,s,r,o=0,a=1){this.canvas=t,this.canvasContext=this.canvas.getContext("2d"),this.url=e,this.imageWidth=i,this.imageHeight=n,this.imagePosition=s,this.spritePosition=r,this.imageReverse=!1,this.framesPerSecond=15,this.startWaitingTime=Date.now(),this.animationDelay=o,this.animationTime=0,this.lastRenderingTime=Date.now(),this.framesAmount=a,this.spriteDirectionReverse=!1,this.spriteDirectionChangeable=!1}renderImage(){const t=new Image;t.src=this.url,this.delayInterval=this.getTimeInterval(this.startWaitingTime,Date.now()),this.isAnimationStarted()&&this.isFramesCycling()&&(this.animationTime=this.getTimeInterval(this.lastRenderingTime+this.animationDelay,Date.now()),this.setSpritePosition()),this.canvasContext.save(),this.imageReverse&&this.canvasContext.scale(-1,1),this.canvasContext.drawImage(t,this.spritePosition[0],this.spritePosition[1],this.state.spriteSize[0],this.state.spriteSize[1],this.getImageXPosition(),this.imagePosition[1],this.imageWidth,this.imageHeight),this.canvasContext.restore()}isAnimationStarted(){return this.delayInterval>this.animationDelay}isImageReverse(t){return 0===t?this.imageReverse:t<0}getImageXPosition(){return this.imageReverse?-this.imagePosition[0]-this.state.imageSize[0]:this.imagePosition[0]}setImagePosition(t,e,i,n){this.imagePosition[0]+=t,this.imagePosition[1]+=e,i&&(this.imagePosition[0]<0?this.imagePosition[0]=0:this.imagePosition[0]+this.imageWidth>i&&(this.imagePosition[0]=i-this.imageWidth),this.imagePosition[1]<0?this.imagePosition[1]=0:this.imagePosition[1]+this.imageHeight>n&&(this.imagePosition[1]=n-this.imageHeight))}setSpritePosition(){this.spriteDirectionReverse?this.spritePosition[0]=this.state.spriteSize[0]*(this.framesAmount-Math.ceil(this.framesPerSecond*this.animationTime/1e3)):this.spritePosition[0]=this.state.spriteSize[0]*Math.floor(this.framesPerSecond*this.animationTime/1e3),this.isFramesCycleEnded()&&(!this.spriteDirectionReverse&&this.spriteDirectionChangeable||this.spriteDirectionReverse&&!this.spriteDirectionChangeable?this.spritePosition[0]=this.state.spriteSize[0]*(this.framesAmount-1):this.spritePosition[0]=0,this.spriteDirectionChangeable&&this.changeSpriteDirection(),this.startWaitingTime=Date.now(),this.lastRenderingTime=Date.now())}isFramesCycling(){return this.framesAmount>1}isFramesCycleEnded(){return this.spritePosition[0]>=this.state.spriteSize[0]*this.framesAmount||this.spritePosition[0]<0}getTimeInterval(t,e){return e-t}changeSpriteDirection(){this.spriteDirectionReverse=!this.spriteDirectionReverse}}class s extends n{constructor(t,e,i,n,s,r,o,a,h,c,l,u){super(i,n,a,h,s,l,c,u),this.name=t,this.appearance=e,this.state=r,this.stateAction=o}setState(t){this.stateAction!==t.action&&(this.stateAction=t.action,this.spritePosition=t.firstSpritePosition.slice(),this.framesAmount=t.framesAmount,this.imageWidth=t.imageSize[0],this.imageHeight=t.imageSize[1],this.animationDelay=t.animationDelay)}}const r=new Map([["stay",{action:"stay",imageSize:[65,95],spriteSize:[125,185],firstSpritePosition:[0,0],framesAmount:7,animationDelay:2e3}],["run",{action:"run",imageSize:[75,95],spriteSize:[145,185],firstSpritePosition:[0,185],framesAmount:14,animationDelay:0}],["aim",{action:"aim",imageSize:[65,95],spriteSize:[130,185],firstSpritePosition:[0,370],framesAmount:12,animationDelay:0}],["hit",{action:"hit",imageSize:[95,95],spriteSize:[185,185],firstSpritePosition:[0,555],framesAmount:8,animationDelay:0}]]),o=new Map([["firstName",["Злой","Коварный","Хитрый"]],["surname",["Разбойник","Охотник","Пират"]],["lastName",["Кряк","Шмяк","Рекс","Кекс"]]]),a=new Map([["stay",{action:"stay",imageSize:[75,75],spriteSize:[150,150],animationDelay:1500}]]),h=new Map([["head",[{firstSpritePosition:[0,0],framesAmount:4},{firstSpritePosition:[0,150],framesAmount:2},{firstSpritePosition:[0,300],framesAmount:3},{firstSpritePosition:[0,450],framesAmount:3}]],["body",[{firstSpritePosition:[0,600],framesAmount:1},{firstSpritePosition:[150,600],framesAmount:1},{firstSpritePosition:[300,600],framesAmount:1}]],["legs",[{firstSpritePosition:[0,750],framesAmount:1},{firstSpritePosition:[150,750],framesAmount:1},{firstSpritePosition:[300,750],framesAmount:1}]],["weapon",[{firstSpritePosition:[0,900],framesAmount:1},{firstSpritePosition:[150,900],framesAmount:1},{firstSpritePosition:[300,900],framesAmount:1}]]]);class c extends s{constructor(...t){super(...t),this.speed=6,this.pressedButtons={up:!1,right:!1,down:!1,left:!1,amount:0},this.healthPoints=100}renderImage(){if(this.pressedButtons.amount>0){const t=this.getImageShiftX(),e=this.getImageShiftY();this.imageReverse=this.isImageReverse(t),"run"!==this.stateAction&&this.setState("run");const i=this.canvas.width,n=this.canvas.height;this.setImagePosition(t,e,i,n)}super.renderImage()}handleInput(t){const e=t.keyCode,i=this.getButtonDirection(e);37!==e&&38!==e&&39!==e&&40!==e||this.addPressedButtons(i)}getButtonDirection(t){return 37===t?"left":38===t?"up":39===t?"right":40===t?"down":void 0}addPressedButtons(t){this.pressedButtons[t]||(this.pressedButtons[t]=!0,this.pressedButtons.amount+=1)}getImageShiftX(){let t=this.speed;return this.pressedButtons.left&&(t=-t),this.pressedButtons.left||this.pressedButtons.right?this.pressedButtons.up||this.pressedButtons.down?t/Math.sqrt(2):t:0}getImageShiftY(){let t=this.speed;return this.pressedButtons.up&&(t=-t),this.pressedButtons.up||this.pressedButtons.down?this.pressedButtons.left||this.pressedButtons.right?t/Math.sqrt(2):t:0}stopHandleInput(t){const e=t.keyCode,i=this.getButtonDirection(e);37!==e&&38!==e&&39!==e&&40!==e||(this.setState("stay"),this.removePressedButtons(i))}removePressedButtons(t){this.pressedButtons.amount-=1,this.pressedButtons[t]=!1}clearCache(){this.pressedButtons.up=!1,this.pressedButtons.right=!1,this.pressedButtons.down=!1,this.pressedButtons.left=!1,this.pressedButtons.amount=0}setState(t){this.state=r.get(t),super.setState(this.state)}}class l extends s{constructor(...t){super(...t),this.imageReverse=!0,this.spriteDirectionChangeable=!0,this.healthPoints=100}getFullName(){return`${this.name.get("firstName")} ${this.name.get("surname")} ${this.name.get("lastName")}`}renderImage(t,e){this.renderBodyParts(t,e,"legs",0,0),this.renderBodyParts(t,e,"body",0,-23),this.renderBodyParts(t,e,"weapon",-35,-33),this.renderBodyParts(t,e,"head",0,-57)}renderBodyParts(t,e,i,n,s){const r=this.appearance.get(i);this.spritePosition=r.firstSpritePosition,this.framesAmount=r.framesAmount,this.setImagePosition(n,s),super.renderImage(t,e),this.setImagePosition(-n,-s)}}function u(t,e=0){return e+Math.floor(Math.random()*(t-e))}function d(t){const e=new Map;return t.forEach((t,i)=>{e.set(i,t[u(t.length)])}),e}class p{constructor(t,e,i){this.canvas=t,this.canvasContext=this.canvas.getContext("2d"),this.player=e,this.monster=i}render(){this.canvasContext.fillStyle="#aaa",this.canvasContext.fillRect(0,0,this.canvas.width,this.canvas.height),this.player.imagePosition[1]+this.player.imageHeight<this.monster.imagePosition[1]+50?(this.player.renderImage(this.canvas,this.canvasContext),this.monster.renderImage(this.canvas,this.canvasContext)):(this.monster.renderImage(this.canvas,this.canvasContext),this.player.renderImage(this.canvas,this.canvasContext))}}i(5);class m{constructor(t,e=[]){this.heading=t,this.links=e}addHandlers(){document.addEventListener("click",this.selectElement)}removeHandlers(){document.removeEventListener("click",this.selectElement)}bindThis(){this.selectElement=this.selectElement.bind(this)}selectElement(t){const e=t.target;if(!e.closest(".nav-item"))return;const i=e.getAttribute("data-index");return this.removeHandlers(),this.component.remove(),i}render(){const t=this.createElement("div","nav"),e=this.createElement("h2","nav-header",this.heading),i=this.createElement("ul","nav-list");this.links.forEach((t,e)=>{const n=this.createElement("li","nav-item",t);n.innerHTML=t,n.setAttribute("data-id",e+1),i.appendChild(n)}),t.appendChild(e),t.appendChild(i),this.component.appendChild(t),document.body.appendChild(this.component)}createElement(t,e,i){const n=document.createElement(t);return n.classList.add(e),i&&(n.innerHTML=i),n}init(){this.component=this.createElement("div","nav-wrapper"),this.bindThis(),this.addHandlers(),this.render()}}i(8);class f extends p{render(){this.canvasContext.fillStyle="#aaa",this.canvasContext.fillRect(0,0,this.canvas.width,this.canvas.height);const t=this.canvas.width/2-100;if(this.renderText(this.player.name,55,50,t-10),this.renderHealthScale(this.player.healthPoints,t,50,70),this.renderText(this.player.healthPoints,55,90,t-10),this.renderText(this.monster.getFullName(),this.canvas.width-55,50,t-10,"#fff","right"),this.renderHealthScale(this.monster.healthPoints,t,this.canvas.width-t-50,70),this.renderText(this.monster.healthPoints,this.canvas.width-55,90,t-10,"#fff","right"),this.isPlayerTurn()){if(this.player.setState("aim"),!this.spellNav){const t=["Удар","Лечение"];this.spellNav=new m("Выбери заклинание:",t),this.spellNav.init()}this.spellNav.isSelected&&this.getNext()}this.player.renderImage(),this.monster.renderImage(),window.requestAnimationFrame(this.render.bind(this))}renderText(t,e,i,n,s="#fff",r="left",o="20px serif"){this.canvasContext.font=o,this.canvasContext.fillStyle=s,this.canvasContext.textAlign=r,this.canvasContext.fillText(t,e,i,n)}renderHealthScale(t,e,i,n){this.canvasContext.fillStyle="red",this.canvasContext.fillRect(i,n,e,30),this.canvasContext.fillStyle="green",this.canvasContext.fillRect(i,n,e*t/100,30)}isPlayerTurn(){return!0}isFinished(){return 0===this.monster.healthPoints||0===this.player.healthPoints}getNext(){return this.isFinished?new g:new Task}init(){this.player.imagePosition=[150,this.canvas.height/2],this.monster.imagePosition=[this.canvas.width-200,this.canvas.height/2+47]}}class g extends p{addHandlers(){document.addEventListener("keydown",this.player.handleInput),document.addEventListener("keyup",this.player.stopHandleInput)}bindThis(){this.player.handleInput=this.player.handleInput.bind(this.player),this.player.stopHandleInput=this.player.stopHandleInput.bind(this.player)}removeHandlers(){document.removeEventListener("keydown",this.player.handleInput),document.removeEventListener("keyup",this.player.stopHandleInput)}isFinished(){const t=this.player.imagePosition[0],e=this.player.imagePosition[0]+this.player.imageWidth,i=this.player.imagePosition[1],n=this.player.imagePosition[1]+this.player.imageHeight,s=this.monster.imagePosition[0],r=this.monster.imagePosition[0]+this.monster.imageWidth,o=this.monster.imagePosition[1],a=this.monster.imagePosition[1]+this.monster.imageHeight;return!(e<s||t>r||i>a-100||n<o+30)}getNext(){return new f(this.canvas,this.player,this.monster)}init(){this.bindThis(),this.addHandlers()}}class v{constructor(t,e){this.canvas=t,this.player=e}render(){this.mode.render(),this.mode.isFinished()&&(this.player.clearCache(),this.mode.removeHandlers(),this.mode=this.mode.getNext(),this.mode.init()),window.requestAnimationFrame(this.render.bind(this))}init(){const t=[this.canvas.width-u(300,200),this.canvas.height-u(200,150)],e=d(h),i=a.get("stay"),n=i.imageSize[0],s=i.imageSize[1];this.monster=new l(d(o),e,this.canvas,"images/enemy-sprite.png",t,i,i.action,n,s,i.animationDelay),this.mode=new g(this.canvas,this.player,this.monster),this.mode.init(),this.render()}}const y=new Image;y.addEventListener("load",()=>{new class{constructor(t){this.canvas=t,this.canvasContext=t.getContext("2d")}startGame(){const t=[100,this.canvas.height/2],e=r.get("stay");this.player=new c("Hero","Scrooge",this.canvas,"images/sprite.png",t,e,e.action,e.imageSize[0],e.imageSize[1],e.animationDelay,e.firstSpritePosition,e.framesAmount,e.animationDelay),this.stage=new v(this.canvas,this.player),this.stage.init()}init(){this.startGame()}}(document.querySelector("#gameCanvas")).init()}),y.src="images/sprite.png"},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,n=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var s,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(s=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:n+r.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")})}},function(t,e,i){var n,s,r={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===s&&(s=n.apply(this,arguments)),s}),a=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var i=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),h=null,c=0,l=[],u=i(1);function d(t,e){for(var i=0;i<t.length;i++){var n=t[i],s=r[n.id];if(s){s.refs++;for(var o=0;o<s.parts.length;o++)s.parts[o](n.parts[o]);for(;o<n.parts.length;o++)s.parts.push(y(n.parts[o],e))}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(y(n.parts[o],e));r[n.id]={id:n.id,refs:1,parts:a}}}}function p(t,e){for(var i=[],n={},s=0;s<t.length;s++){var r=t[s],o=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};n[o]?n[o].parts.push(a):i.push(n[o]={id:o,parts:[a]})}return i}function m(t,e){var i=a(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=l[l.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),l.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var s=a(t.insertInto+" "+t.insertAt.before);i.insertBefore(e,s)}}function f(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function g(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),v(e,t.attrs),m(t,e),e}function v(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function y(t,e){var i,n,s,r;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var o=c++;i=h||(h=g(e)),n=w.bind(null,i,o,!1),s=w.bind(null,i,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),m(t,e),e}(e),n=function(t,e,i){var n=i.css,s=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&s;(e.convertToAbsoluteUrls||r)&&(n=u(n));s&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var o=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}.bind(null,i,e),s=function(){f(i),i.href&&URL.revokeObjectURL(i.href)}):(i=g(e),n=function(t,e){var i=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),s=function(){f(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else s()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=p(t,e);return d(i,e),function(t){for(var n=[],s=0;s<i.length;s++){var o=i[s];(a=r[o.id]).refs--,n.push(a)}t&&d(p(t,e),e);for(s=0;s<n.length;s++){var a;if(0===(a=n[s]).refs){for(var h=0;h<a.parts.length;h++)a.parts[h]();delete r[a.id]}}}};var b,P=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function w(t,e,i,n){var s=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=P(e,s);else{var r=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var s=(o=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(r).concat([s]).join("\n")}var o;return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},s=0;s<this.length;s++){var r=this[s][0];"number"==typeof r&&(n[r]=!0)}for(s=0;s<t.length;s++){var o=t[s];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),e.push(o))}},e}},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,".nav-wrapper {\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin: 0;\r\n  padding: 0;\r\n  background-color: rgba(100, 100, 100, 0.4);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.nav {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.nav-header {\r\n  font-size: 30px;\r\n  color: gold;\r\n}\r\n\r\n.nav-list {\r\n  list-style: none;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: stretch;\r\n  text-align: center;\r\n  margin: 0;\r\n  padding: 0;\r\n  color: gold;\r\n  background-color: #00f;\r\n  font-size: 20px;\r\n}\r\n\r\n.nav-item {\r\n  padding: 10px 30px;\r\n}\r\n\r\n.nav-item:hover {\r\n  cursor: pointer;\r\n  background-color: #55f;\r\n}",""])},function(t,e,i){var n=i(4);"string"==typeof n&&(n=[[t.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i(2)(n,s);n.locals&&(t.exports=n.locals)},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){(function(t,n){var s;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(r){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var o="object"==typeof n&&n;o.global!==o&&o.window!==o&&o.self;var a,h=2147483647,c=36,l=1,u=26,d=38,p=700,m=72,f=128,g="-",v=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-l,S=Math.floor,x=String.fromCharCode;function C(t){throw new RangeError(P[t])}function A(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function I(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+A((t=t.replace(b,".")).split("."),e).join(".")}function B(t){for(var e,i,n=[],s=0,r=t.length;s<r;)(e=t.charCodeAt(s++))>=55296&&e<=56319&&s<r?56320==(64512&(i=t.charCodeAt(s++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),s--):n.push(e);return n}function T(t){return A(t,function(t){var e="";return t>65535&&(e+=x((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=x(t)}).join("")}function R(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function D(t,e,i){var n=0;for(t=i?S(t/p):t>>1,t+=S(t/e);t>w*u>>1;n+=c)t=S(t/w);return S(n+(w+1)*t/(t+d))}function E(t){var e,i,n,s,r,o,a,d,p,v,y,b=[],P=t.length,w=0,x=f,A=m;for((i=t.lastIndexOf(g))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&C("not-basic"),b.push(t.charCodeAt(n));for(s=i>0?i+1:0;s<P;){for(r=w,o=1,a=c;s>=P&&C("invalid-input"),((d=(y=t.charCodeAt(s++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||d>S((h-w)/o))&&C("overflow"),w+=d*o,!(d<(p=a<=A?l:a>=A+u?u:a-A));a+=c)o>S(h/(v=c-p))&&C("overflow"),o*=v;A=D(w-r,e=b.length+1,0==r),S(w/e)>h-x&&C("overflow"),x+=S(w/e),w%=e,b.splice(w++,0,x)}return T(b)}function j(t){var e,i,n,s,r,o,a,d,p,v,y,b,P,w,A,I=[];for(b=(t=B(t)).length,e=f,i=0,r=m,o=0;o<b;++o)(y=t[o])<128&&I.push(x(y));for(n=s=I.length,s&&I.push(g);n<b;){for(a=h,o=0;o<b;++o)(y=t[o])>=e&&y<a&&(a=y);for(a-e>S((h-i)/(P=n+1))&&C("overflow"),i+=(a-e)*P,e=a,o=0;o<b;++o)if((y=t[o])<e&&++i>h&&C("overflow"),y==e){for(d=i,p=c;!(d<(v=p<=r?l:p>=r+u?u:p-r));p+=c)A=d-v,w=c-v,I.push(x(R(v+A%w,0))),d=S(A/w);I.push(x(R(d,0))),r=D(i,P,n==s),i=0,++n}++i,++e}return I.join("")}a={version:"1.4.1",ucs2:{decode:B,encode:T},decode:E,encode:j,toASCII:function(t){return I(t,function(t){return y.test(t)?"xn--"+j(t):t})},toUnicode:function(t){return I(t,function(t){return v.test(t)?E(t.slice(4).toLowerCase()):t})}},void 0===(s=function(){return a}.call(e,i,e,t))||(t.exports=s)}()}).call(this,i(7)(t),i(6))}]);