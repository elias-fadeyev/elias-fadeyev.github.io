{"code":"!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";i.r(e);class s{constructor(t,e,i,s,o,n){this.name=t,this.appearance=e,this.url=i,this.imagePosition=s,this.state=o,this.spritePosition=n,this.imageLastPosition=this.imagePosition,this.speed=10}renderImage(t){const e=new Image;e.src=this.url,t.clearRect(this.imageLastPosition[0],this.imageLastPosition[1],this.state.imageSize[0],this.state.imageSize[1]),t.drawImage(e,this.spritePosition[0],this.spritePosition[1],this.state.spriteSize[0],this.state.spriteSize[1],this.imagePosition[0],this.imagePosition[1],this.state.imageSize[0],this.state.imageSize[1])}getImageLastPosition(){return[this.imagePosition[0],this.imagePosition[1]]}setSpritePosition(){this.spritePosition[0]+=this.state.spriteSize[0],this.spritePosition[0]>=this.state.spriteSize[0]*this.state.imageAmount&&(this.spritePosition[0]=0)}}const o=new Map([[\"firstName\",[\"Злой\",\"Коварный\",\"Хитрый\"]],[\"surname\",[\"Разбойник\",\"Охотник\",\"Пират\"]],[\"lastName\",[\"Джек\",\"Макс\",\"Рекс\",\"Кекс\"]]]),n=new Map([[\"head\",[\"head1\",\"head2\",\"head3\"]],[\"body\",[\"body1\",\"body2\",\"body3\"]],[\"legs\",[\"legs1\",\"legs2\",\"legs3\"]],[\"weapon\",[\"axe\",\"sword\",\"stick\"]]]),a=new Map([[\"stay\",{action:\"stay\",imageSize:[65,95],spriteSize:[125,185],firstSpritePosition:[0,0],imageAmount:7}],[\"run\",{action:\"run\",imageSize:[75,95],spriteSize:[145,185],firstSpritePosition:[0,185],imageAmount:14}]]);class r extends s{move(t){37!==t.keyCode&&38!==t.keyCode&&39!==t.keyCode&&40!==t.keyCode||(\"run\"!==this.state.action&&(this.state=a.get(\"run\"),this.spritePosition=[this.state.firstSpritePosition[0]-this.state.spriteSize[0],this.state.firstSpritePosition[1]]),this.imageLastPosition=this.getImageLastPosition(),this.setSpritePosition()),37===t.keyCode?this.imagePosition[0]-=this.speed:38===t.keyCode?this.imagePosition[1]-=this.speed:39===t.keyCode?this.imagePosition[0]+=this.speed:40===t.keyCode&&(this.imagePosition[1]+=this.speed)}stop(t){37!==t.keyCode&&38!==t.keyCode&&39!==t.keyCode&&40!==t.keyCode||(this.imageLastPosition=this.getImageLastPosition(),this.state=a.get(\"stay\"),this.spritePosition=[this.state.firstSpritePosition[0]-this.state.spriteSize[0],this.state.firstSpritePosition[1]],this.setSpritePosition())}}class h extends s{getFullName(){return`${this.name.get(\"firstName\")} ${this.name.get(\"surname\")} ${this.name.get(\"lastName\")}`}}const d=new Image;d.addEventListener(\"load\",()=>{new class{constructor(t){this.canvas=t,this.canvasContext=t.getContext(\"2d\")}getRandomNumber(t){return Math.floor(Math.random()*t)}getRandomData(t){const e=new Map;return t.forEach((t,i)=>{e.set(i,t[this.getRandomNumber(t.length)])}),e}render(){this.player.renderImage(this.canvasContext),window.requestAnimationFrame(this.render.bind(this))}init(){const t=a.get(\"stay\"),e=t.firstSpritePosition;this.player=new r(\"Hero\",\"Scrooge\",\"images/sprite.png\",[0,0],t,e),document.addEventListener(\"keydown\",this.player.move.bind(this.player)),document.addEventListener(\"keyup\",this.player.stop.bind(this.player)),this.monster1=new h(this.getRandomData(o),this.getRandomData(n)),this.monster2=new h(this.getRandomData(o),this.getRandomData(n)),this.render()}}(document.querySelector(\"#gameCanvas\")).init()}),d.src=\"images/sprite.png\"}]);","extractedComments":[]}