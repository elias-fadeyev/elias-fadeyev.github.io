{"code":"!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=0)}([function(e,t,i){\"use strict\";i.r(t);const s=new Map([[\"firstName\",[\"Злой\",\"Коварный\",\"Хитрый\"]],[\"surname\",[\"Разбойник\",\"Охотник\",\"Пират\"]],[\"lastName\",[\"Джек\",\"Макс\",\"Рекс\",\"Кекс\"]]]),n=new Map([[\"head\",[\"head1\",\"head2\",\"head3\"]],[\"body\",[\"body1\",\"body2\",\"body3\"]],[\"legs\",[\"legs1\",\"legs2\",\"legs3\"]],[\"weapon\",[\"axe\",\"sword\",\"stick\"]]]),o=new Map([[\"stay\",{action:\"stay\",imageSize:[65,95],spriteSize:[125,185],firstSpritePosition:[0,0],imageAmount:7}],[\"run\",{action:\"run\",imageSize:[75,95],spriteSize:[145,185],firstSpritePosition:[0,185],imageAmount:14}]]);class a{constructor(e,t,i,s,n,o){this.name=e,this.appearance=t,this.url=i,this.imagePosition=s,this.state=n,this.spritePosition=o,this.imageLastPosition=[],this.speed=10,this.imageReverse=!1}renderImage(e){const t=new Image;t.src=this.url,this.setSpritePosition(),e.save(),this.imageReverse&&e.scale(-1,1),e.drawImage(t,this.spritePosition[0],this.spritePosition[1],this.state.spriteSize[0],this.state.spriteSize[1],this.getImageXPosition(),this.imagePosition[1],this.state.imageSize[0],this.state.imageSize[1]),e.restore(),this.imagePosition[0]=Math.abs(this.imagePosition[0])}getImageXPosition(){return this.imageReverse?-this.imagePosition[0]:this.imagePosition[0]}setImagePosition(e,t){this.imagePosition[0]+=e,this.imagePosition[1]+=t}setSpritePosition(){this.spritePosition[0]+=this.state.spriteSize[0],this.spritePosition[0]>=this.state.spriteSize[0]*this.state.imageAmount&&(this.spritePosition[0]=0)}setState(e){this.state=o.get(e),this.spritePosition=this.state.firstSpritePosition.slice(),this.spritePosition[0]-=this.state.spriteSize[0]}}class r extends a{move(e){37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode||(\"run\"!==this.state.action&&this.setState(\"run\"),this.setSpritePosition()),37===e.keyCode?(this.setImagePosition(-this.speed,0),this.imageReverse=!0):38===e.keyCode?this.setImagePosition(0,-this.speed):39===e.keyCode?(this.setImagePosition(this.speed,0),this.imageReverse=!1):40===e.keyCode&&this.setImagePosition(0,this.speed)}stop(e){37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode||(this.setState(\"stay\"),this.setSpritePosition())}}class h extends a{getFullName(){return`${this.name.get(\"firstName\")} ${this.name.get(\"surname\")} ${this.name.get(\"lastName\")}`}}const d=new Image;d.addEventListener(\"load\",()=>{new class{constructor(e){this.canvas=e,this.canvasContext=e.getContext(\"2d\")}getRandomNumber(e){return Math.floor(Math.random()*e)}getRandomData(e){const t=new Map;return e.forEach((e,i)=>{t.set(i,e[this.getRandomNumber(e.length)])}),t}render(){this.canvasContext.fillRect(0,0,this.canvas.width,this.canvas.height),this.player.renderImage(this.canvasContext),window.requestAnimationFrame(this.render.bind(this))}init(){const e=o.get(\"stay\"),t=e.firstSpritePosition;this.player=new r(\"Hero\",\"Scrooge\",\"images/sprite.png\",[0,0],e,t),document.addEventListener(\"keydown\",this.player.move.bind(this.player)),document.addEventListener(\"keyup\",this.player.stop.bind(this.player)),this.monster1=new h(this.getRandomData(s),this.getRandomData(n)),this.monster2=new h(this.getRandomData(s),this.getRandomData(n)),this.render()}}(document.querySelector(\"#gameCanvas\")).init()}),d.src=\"images/sprite.png\"}]);","extractedComments":[]}